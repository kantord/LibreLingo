(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{616:function(e,t,c){"use strict";c.r(t);var s=c(0),n=(c(161),c(167)),b=c(157),a=c(153),j=c(587),O=c(7),o=c(37);function r(e){let t,c,n=e[3].license+"";return{c(){t=Object(s.F)("p"),c=Object(s.ob)(n),this.h()},l(e){t=Object(s.p)(e,"P",{class:!0});var b=Object(s.n)(t);c=Object(s.s)(b,n),b.forEach(s.E),this.h()},h(){Object(s.j)(t,"class","help is-danger")},m(e,n){Object(s.S)(e,t,n),Object(s.g)(t,c)},p(e,t){8&t&&n!==(n=e[3].license+"")&&Object(s.hb)(c,n)},d(e){e&&Object(s.E)(t)}}}function i(e){let t,c,n=e[3]._form+"";return{c(){t=Object(s.F)("p"),c=Object(s.ob)(n),this.h()},l(e){t=Object(s.p)(e,"P",{class:!0});var b=Object(s.n)(t);c=Object(s.s)(b,n),b.forEach(s.E),this.h()},h(){Object(s.j)(t,"class","help is-danger")},m(e,n){Object(s.S)(e,t,n),Object(s.g)(t,c)},p(e,t){8&t&&n!==(n=e[3]._form+"")&&Object(s.hb)(c,n)},d(e){e&&Object(s.E)(t)}}}function l(e){let t;return{c(){t=Object(s.ob)("Sign up")},l(e){t=Object(s.s)(e,"Sign up")},m(e,c){Object(s.S)(e,t,c)},d(e){e&&Object(s.E)(t)}}}function u(e){let t,c,n,O,o,u,d,g,p,f,h,m,$,w,v,E,k,y,S,_,F,P,T,C,x,U,I,q,A,L,W,N,G,D,J,V,H,M,R,Y;function z(t){e[9](t)}O=new b.a({});let B={name:"Username",icon:"user",id:"username",formStatus:e[3]};function Q(t){e[10](t)}void 0!==e[0]&&(B.value=e[0]),m=new j.a({props:B}),s.l.push(()=>Object(s.k)(m,"value",z));let K={name:"Email",icon:"envelope",id:"email",formStatus:e[3]};function X(t){e[11](t)}void 0!==e[1]&&(K.value=e[1]),v=new j.a({props:K}),s.l.push(()=>Object(s.k)(v,"value",Q));let Z={name:"Password",icon:"lock",id:"password",type:"password",formStatus:e[3]};function ee(t){e[12](t)}void 0!==e[2]&&(Z.value=e[2]),y=new j.a({props:Z}),s.l.push(()=>Object(s.k)(y,"value",X));let te={name:"Repeat password",icon:"lock",id:"password_confirmation",type:"password",formStatus:e[3]};void 0!==e[5]&&(te.value=e[5]),F=new j.a({props:te}),s.l.push(()=>Object(s.k)(F,"value",ee));let ce=null!=e[3].license&&r(e),se=null!=e[3]._form&&i(e);return H=new a.a({props:{loading:e[4],asHref:"/sign-up-success",type:"submit",$$slots:{default:[l]},$$scope:{ctx:e}}}),H.$on("click",(function(){Object(s.T)(e[7])&&e[7].apply(this,arguments)})),{c(){t=Object(s.F)("meta"),n=Object(s.kb)(),Object(s.y)(O.$$.fragment),o=Object(s.kb)(),u=Object(s.F)("section"),d=Object(s.F)("div"),g=Object(s.F)("form"),p=Object(s.F)("h2"),f=Object(s.ob)("Sign up"),h=Object(s.kb)(),Object(s.y)(m.$$.fragment),w=Object(s.kb)(),Object(s.y)(v.$$.fragment),k=Object(s.kb)(),Object(s.y)(y.$$.fragment),_=Object(s.kb)(),Object(s.y)(F.$$.fragment),T=Object(s.kb)(),C=Object(s.F)("div"),x=Object(s.F)("div"),U=Object(s.F)("label"),I=Object(s.F)("input"),q=Object(s.ob)("\n            I agree to the\n            "),A=Object(s.F)("a"),L=Object(s.ob)("Terms and Conditions"),W=Object(s.ob)("\n            and the\n            "),N=Object(s.F)("a"),G=Object(s.ob)("GNU Affero General Public License"),D=Object(s.kb)(),ce&&ce.c(),J=Object(s.kb)(),se&&se.c(),V=Object(s.kb)(),Object(s.y)(H.$$.fragment),this.h()},l(e){const c=Object(s.O)("svelte-14x6y23",document.head);t=Object(s.p)(c,"META",{name:!0,content:!0}),c.forEach(s.E),n=Object(s.r)(e),Object(s.o)(O.$$.fragment,e),o=Object(s.r)(e),u=Object(s.p)(e,"SECTION",{class:!0});var b=Object(s.n)(u);d=Object(s.p)(b,"DIV",{class:!0});var a=Object(s.n)(d);g=Object(s.p)(a,"FORM",{});var j=Object(s.n)(g);p=Object(s.p)(j,"H2",{class:!0});var r=Object(s.n)(p);f=Object(s.s)(r,"Sign up"),r.forEach(s.E),h=Object(s.r)(j),Object(s.o)(m.$$.fragment,j),w=Object(s.r)(j),Object(s.o)(v.$$.fragment,j),k=Object(s.r)(j),Object(s.o)(y.$$.fragment,j),_=Object(s.r)(j),Object(s.o)(F.$$.fragment,j),T=Object(s.r)(j),C=Object(s.p)(j,"DIV",{class:!0});var i=Object(s.n)(C);x=Object(s.p)(i,"DIV",{class:!0});var l=Object(s.n)(x);U=Object(s.p)(l,"LABEL",{class:!0});var $=Object(s.n)(U);I=Object(s.p)($,"INPUT",{type:!0,name:!0,id:!0}),q=Object(s.s)($,"\n            I agree to the\n            "),A=Object(s.p)($,"A",{href:!0});var E=Object(s.n)(A);L=Object(s.s)(E,"Terms and Conditions"),E.forEach(s.E),W=Object(s.s)($,"\n            and the\n            "),N=Object(s.p)($,"A",{href:!0});var S=Object(s.n)(N);G=Object(s.s)(S,"GNU Affero General Public License"),S.forEach(s.E),$.forEach(s.E),l.forEach(s.E),D=Object(s.r)(i),ce&&ce.l(i),i.forEach(s.E),J=Object(s.r)(j),se&&se.l(j),V=Object(s.r)(j),Object(s.o)(H.$$.fragment,j),j.forEach(s.E),a.forEach(s.E),b.forEach(s.E),this.h()},h(){document.title="Sign up - LibreLingo",Object(s.j)(t,"name","description"),Object(s.j)(t,"content",c=e[8]("sign-up.meta.description")),Object(s.j)(p,"class","is-size-2"),Object(s.j)(I,"type","checkbox"),Object(s.j)(I,"name","license"),Object(s.j)(I,"id","license"),Object(s.j)(A,"href","/tos"),Object(s.j)(N,"href","/license"),Object(s.j)(U,"class","checkbox"),Object(s.j)(x,"class","control"),Object(s.j)(C,"class","field"),Object(s.j)(d,"class","container"),Object(s.j)(u,"class","section")},m(c,b){Object(s.g)(document.head,t),Object(s.S)(c,n,b),Object(s.W)(O,c,b),Object(s.S)(c,o,b),Object(s.S)(c,u,b),Object(s.g)(u,d),Object(s.g)(d,g),Object(s.g)(g,p),Object(s.g)(p,f),Object(s.g)(g,h),Object(s.W)(m,g,null),Object(s.g)(g,w),Object(s.W)(v,g,null),Object(s.g)(g,k),Object(s.W)(y,g,null),Object(s.g)(g,_),Object(s.W)(F,g,null),Object(s.g)(g,T),Object(s.g)(g,C),Object(s.g)(C,x),Object(s.g)(x,U),Object(s.g)(U,I),I.checked=e[6],Object(s.g)(U,q),Object(s.g)(U,A),Object(s.g)(A,L),Object(s.g)(U,W),Object(s.g)(U,N),Object(s.g)(N,G),Object(s.g)(C,D),ce&&ce.m(C,null),Object(s.g)(g,J),se&&se.m(g,null),Object(s.g)(g,V),Object(s.W)(H,g,null),M=!0,R||(Y=[Object(s.U)(I,"change",e[13]),Object(s.U)(g,"submit",Object(s.cb)((function(){Object(s.T)(e[7])&&e[7].apply(this,arguments)})))],R=!0)},p(n,[b]){e=n,(!M||256&b&&c!==(c=e[8]("sign-up.meta.description")))&&Object(s.j)(t,"content",c);const a={};8&b&&(a.formStatus=e[3]),!$&&1&b&&($=!0,a.value=e[0],Object(s.d)(()=>$=!1)),m.$set(a);const j={};8&b&&(j.formStatus=e[3]),!E&&2&b&&(E=!0,j.value=e[1],Object(s.d)(()=>E=!1)),v.$set(j);const O={};8&b&&(O.formStatus=e[3]),!S&&4&b&&(S=!0,O.value=e[2],Object(s.d)(()=>S=!1)),y.$set(O);const o={};8&b&&(o.formStatus=e[3]),!P&&32&b&&(P=!0,o.value=e[5],Object(s.d)(()=>P=!1)),F.$set(o),64&b&&(I.checked=e[6]),null!=e[3].license?ce?ce.p(e,b):(ce=r(e),ce.c(),ce.m(C,null)):ce&&(ce.d(1),ce=null),null!=e[3]._form?se?se.p(e,b):(se=i(e),se.c(),se.m(g,V)):se&&(se.d(1),se=null);const l={};16&b&&(l.loading=e[4]),524288&b&&(l.$$scope={dirty:b,ctx:e}),H.$set(l)},i(e){M||(Object(s.qb)(O.$$.fragment,e),Object(s.qb)(m.$$.fragment,e),Object(s.qb)(v.$$.fragment,e),Object(s.qb)(y.$$.fragment,e),Object(s.qb)(F.$$.fragment,e),Object(s.qb)(H.$$.fragment,e),M=!0)},o(e){Object(s.rb)(O.$$.fragment,e),Object(s.rb)(m.$$.fragment,e),Object(s.rb)(v.$$.fragment,e),Object(s.rb)(y.$$.fragment,e),Object(s.rb)(F.$$.fragment,e),Object(s.rb)(H.$$.fragment,e),M=!1},d(e){Object(s.E)(t),e&&Object(s.E)(n),Object(s.C)(O,e),e&&Object(s.E)(o),e&&Object(s.E)(u),Object(s.C)(m),Object(s.C)(v),Object(s.C)(y),Object(s.C)(F),ce&&ce.d(),se&&se.d(),Object(s.C)(H),R=!1,Object(s.db)(Y)}}}const d=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i;function g(e,t,c){let b;Object(s.t)(e,O.a,e=>c(8,b=e));let a=!1,j="",r="",i="",l="",u=!1,g={};let p;return e.$$.update=()=>{15&e.$$.dirty&&c(7,p=async()=>{c(4,a=!0),c(3,g={}),j?j.length<4&&c(3,g=Object.assign(Object.assign({},g),{username:"Please choose a username that has at least 4 characters"})):c(3,g=Object.assign(Object.assign({},g),{username:"Please choose a username"})),r?d.test(r)||c(3,g=Object.assign(Object.assign({},g),{email:"This does not look like a valid email address"})):c(3,g=Object.assign(Object.assign({},g),{email:"Please tell us your email address"})),i?i.length<6?c(3,g=Object.assign(Object.assign({},g),{password:"Your password is too short. Please choose a password that's at least 5 characters long."})):l?i===l||c(3,g=Object.assign(Object.assign({},g),{password_confirmation:"The passwords don't match"})):c(3,g=Object.assign(Object.assign({},g),{password_confirmation:"Please verify your chosen password by repeating it"})):c(3,g=Object.assign(Object.assign({},g),{password:"Please choose a password"})),u?j.length<4&&c(3,g=Object.assign(Object.assign({},g),{username:"Please choose a username that has at least 4 characters"})):c(3,g=Object.assign(Object.assign({},g),{license:"You have to accept the agreements."})),(null===window||void 0===window?void 0:window._test_fake_signup)&&(null===window||void 0===window?void 0:window._test_user_already_exists)&&c(3,g=Object.assign(Object.assign({},g),{_form:"User already exists. Please choose another username."}));const e=0===Object.keys(g).length;!0===Object(o.a)()&&((null===window||void 0===window?void 0:window._test_fake_signup)?setTimeout((function(){!0===e?(c(4,a=!1),window.location.href="/sign-up-success"):c(4,a=!1)}),500):e?fetch(n.a.database.signUpEndpoint,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:j,email:r,password:i})}).then(e=>e.json()).then(({success:e,error:t})=>{e?(c(4,a=!1),window.location.href="/sign-up-success"):(c(4,a=!1),"invalid-payload"===t.code?c(3,g=t.details):c(3,g={_form:"Server error"}))}):c(4,a=!1))})},[j,r,i,g,a,l,u,p,b,function(e){j=e,c(0,j)},function(e){r=e,c(1,r)},function(e){i=e,c(2,i)},function(e){l=e,c(5,l)},function(){u=this.checked,c(6,u)}]}class p extends s.b{constructor(e){super(),Object(s.Q)(this,e,g,u,s.eb,{})}}t.default=p}}]);